# ==========================================
# LANGA AGENT CONFIGURATION (.env)
# ==========================================

# --- BACKEND CONFIGURATION ---
# URL of the Langa ingestion endpoint (either HTTP or KAFKA)
# LANGA_INGESTION_URL=https://api.langa.capricedumardi.com/ingest
# API Secret for authentication (this should not be shared publicly)
# LANGA_INGESTION_SECRET=your_api_secret_here

# --- BUFFER CONFIGURATION ---
# Number of entries (logs/metrics) to accumulate before sending
LANGA_BUFFER_BATCH_SIZE=50
# Interval in seconds to force flush even if the batch is not full
LANGA_BUFFER_FLUSH_INTERVAL_SECONDS=5
# Maximum capacity of the main queue (prevents OutOfMemory errors)
LANGA_BUFFER_MAIN_QUEUE_CAPACITY=10000
# Capacity of the retry queue
LANGA_BUFFER_RETRY_QUEUE_CAPACITY=5000

# --- SCHEDULER CONFIGURATION ---
# Thread pool size (Default: max(2, CPU/2))
LANGA_SCHEDULER_THREAD_POOL_SIZE=2
# Maximum wait time during agent shutdown (in seconds)
LANGA_SCHEDULER_SHUTDOWN_TIMEOUT_SECONDS=30

# --- HTTP SENDER CONFIGURATION ---
# Maximum total HTTP connections
LANGA_HTTP_MAX_CONNECTIONS_TOTAL=100
# Maximum HTTP connections per route (host)
LANGA_HTTP_MAX_CONNECTIONS_PER_ROUTE=20
# Connection timeout (TCP handshake) in milliseconds
LANGA_HTTP_CONNECT_TIMEOUT_MILLIS=5000
# Socket timeout (read timeout) in milliseconds
LANGA_HTTP_SOCKET_TIMEOUT_MILLIS=10000
# Timeout to request a connection from the pool in milliseconds
LANGA_HTTP_CONNECTION_REQUEST_TIMEOUT_MILLIS=30000
# Threshold in bytes to enable payload compression
LANGA_HTTP_COMPRESSION_THRESHOLD_BYTES=1024
# Maximum number of HTTP retry attempts
LANGA_HTTP_MAX_RETRY_ATTEMPTS=3
# Initial retry delay in milliseconds (for exponential backoff)
LANGA_HTTP_BASE_RETRY_DELAY_MILLIS=100
# Maximum retry delay in milliseconds
LANGA_HTTP_MAX_RETRY_DELAY_MILLIS=5000

# --- KAFKA SENDER CONFIGURATION ---
# Kafka request timeout in milliseconds
LANGA_KAFKA_REQUEST_TIMEOUT_MILLIS=30000
# Global delivery timeout in milliseconds
LANGA_KAFKA_DELIVERY_TIMEOUT_MILLIS=120000
# Producer close timeout in seconds
LANGA_KAFKA_PRODUCER_CLOSE_TIMEOUT_SECONDS=10
# Kafka batch size in bytes
LANGA_KAFKA_BATCH_SIZE_BYTES=16384
# Kafka linger time in milliseconds (linger.ms)
LANGA_KAFKA_LINGER_MILLIS=10
# Kafka buffer memory in bytes
LANGA_KAFKA_BUFFER_MEMORY_BYTES=33554432
# Compression type (snappy, gzip, lz4, zstd, none)
LANGA_KAFKA_COMPRESSION_TYPE=snappy
# Acknowledgment level (all, 1, 0)
LANGA_KAFKA_ACKS=all
# Internal Kafka retries
LANGA_KAFKA_RETRIES=3
# Maximum in-flight requests per connection
LANGA_KAFKA_MAX_IN_FLIGHT_REQUESTS=5
# Enable idempotence (Exactly-once semantics)
LANGA_KAFKA_ENABLE_IDEMPOTENCE=true
# Async send mode (true = non-blocking, false = blocking)
LANGA_KAFKA_ASYNC_SEND=true

# --- CIRCUIT BREAKER ---
# Threshold of consecutive failures before opening the circuit
LANGA_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
# Duration to keep the circuit open before attempting recovery (in milliseconds)
LANGA_CIRCUIT_BREAKER_OPEN_DURATION_MILLIS=30000

# --- GLOBAL RETRY ---
# Maximum delay between retries (backoff cap) in seconds
LANGA_RETRY_MAX_DELAY_SECONDS=300
# Maximum global consecutive errors allowed
LANGA_RETRY_MAX_CONSECUTIVE_ERRORS=10

# --- METADATA / DEBUG ---
# Agent version (sent in headers)
LANGA_AGENT_VERSION=langa-agent-v1.0.0
# Enable verbose agent logging
LANGA_DEBUG_MODE=false