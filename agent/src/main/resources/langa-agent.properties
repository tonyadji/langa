# Langa Agent Configuration File
# Place this file as:
# - langa-agent.properties (current directory)

# ========================================
# Backend Configuration
# ========================================

# URL of the Langa ingestion endpoint (either HTTP or KAFKA)
# langa.ingestion.url=https://api.langa.capricedumardi.com/ingest
# API Secret for authentication (this should not be shared publicly)
# langa.ingestion.secret=your_api_secret_here


# ========================================
# Buffer Configuration
# ========================================

# Number of entries to batch before sending (both log and metric buffers)
langa.buffer.batch.size=50

# Seconds between automatic flushes
langa.buffer.flush.interval.seconds=5

# Main queue capacity (prevents OOM)
langa.buffer.main.queue.capacity=10000

# Retry queue capacity
langa.buffer.retry.queue.capacity=5000

# ========================================
# Scheduler Configuration
# ========================================

# Number of scheduler threads (default: max(2, CPU cores / 2))
# langa.scheduler.thread.pool.size=4

# Scheduler shutdown timeout in seconds
langa.scheduler.shutdown.timeout.seconds=30

# ========================================
# HTTP Configuration
# ========================================

# Maximum total HTTP connections
langa.http.max.connections.total=100

# Maximum HTTP connections per route
langa.http.max.connections.per.route=20

# HTTP connect timeout in milliseconds
langa.http.connect.timeout.millis=5000

# HTTP socket (read) timeout in milliseconds
langa.http.socket.timeout.millis=10000

# HTTP connection request timeout in milliseconds
langa.http.connection.request.timeout.millis=30000

# Threshold in bytes for HTTP compression (compress if payload > this)
langa.http.compression.threshold.bytes=1024

# Maximum HTTP retry attempts
langa.http.max.retry.attempts=3

# Base HTTP retry delay in milliseconds (for exponential backoff)
langa.http.base.retry.delay.millis=100

# Maximum HTTP retry delay in milliseconds
langa.http.max.retry.delay.millis=5000

# ========================================
# Kafka Configuration
# ========================================

# Kafka request timeout in milliseconds
langa.kafka.request.timeout.millis=30000

# Kafka delivery timeout in milliseconds
langa.kafka.delivery.timeout.millis=120000

# Kafka producer close timeout in seconds
langa.kafka.producer.close.timeout.seconds=10

# Kafka batch size in bytes
langa.kafka.batch.size.bytes=16384

# Kafka linger time in milliseconds (wait for batching)
langa.kafka.linger.millis=10

# Kafka buffer memory in bytes
langa.kafka.buffer.memory.bytes=33554432

# Kafka compression type (snappy, gzip, lz4, zstd, none)
langa.kafka.compression.type=snappy

# Kafka acks configuration (all, 1, 0)
langa.kafka.acks=all

# Kafka retries
langa.kafka.retries=3

# Kafka max in-flight requests per connection
langa.kafka.max.in.flight.requests=5

# Enable Kafka idempotence (exactly-once)
langa.kafka.enable.idempotence=true

# Kafka async send mode (true = async with tracking, false = sync)
langa.kafka.async.send=true

# ========================================
# Circuit Breaker Configuration
# ========================================

# Number of consecutive failures before opening circuit
langa.circuit.breaker.failure.threshold=5

# How long to wait before testing recovery (milliseconds)
langa.circuit.breaker.open.duration.millis=30000

# ========================================
# Retry Configuration
# ========================================

# Maximum retry delay for exponential backoff (seconds)
langa.retry.max.delay.seconds=300

# Maximum consecutive errors before stopping retry
langa.retry.max.consecutive.errors=10

# ========================================
# Agent Metadata
# ========================================

# Agent version for User-Agent header
langa.agent.version=langa-agent-v1.0.0

# Enable debug mode (more verbose output)
langa.debug.mode=false

# ========================================
# Environment-Specific Overrides
# ========================================
# You can also set these via environment variables:
# - Replace dots with underscores
# - Convert to uppercase
# - Prefix remains LANGA_
#
# Examples:
#   langa.buffer.batch.size       ? LANGA_BUFFER_BATCH_SIZE
#   langa.http.socket.timeout.millis ? LANGA_HTTP_SOCKET_TIMEOUT_MILLIS
#   langa.debug.mode              ? LANGA_DEBUG_MODE
#
# Or via system properties:
#   java -Dlanga.buffer.batch.size=100 -jar app.jar
